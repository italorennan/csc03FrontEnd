{"ast":null,"code":"var _jsxFileName = \"/home/italorennan/csc03FrontEnd/src/sections/Local/Statistics.js\";\nimport React, { useState } from 'react';\nimport { Text } from '../../pages/Local/styles';\nimport { XYPlot, LineSeries, VerticalGridLines, HorizontalGridLines, XAxis, YAxis } from 'react-vis';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, KeyboardDateTimePicker } from '@material-ui/pickers';\n\nfunction Statistics() {\n  const [dates, setDates] = useState({\n    minDate: new Date(new Date(Date.now()).getFullYear(), new Date(Date.now()).getMonth(), new Date(Date.now()).getDate(), 0, 0, 0, 0),\n    maxDate: new Date(new Date(Date.now()).getFullYear(), new Date(Date.now()).getMonth(), new Date(Date.now()).getDate(), 23, 59, 59, 999)\n  });\n  const [events, setEvents] = useState([]);\n  const [data, setData] = useState([]);\n  const data2 = [{\n    x: 0,\n    y: 8\n  }, {\n    x: 1,\n    y: 5\n  }, {\n    x: 2,\n    y: 4\n  }, {\n    x: 3,\n    y: 9\n  }, {\n    x: 4,\n    y: 1\n  }, {\n    x: 5,\n    y: 7\n  }, {\n    x: 6,\n    y: 6\n  }, {\n    x: 7,\n    y: 3\n  }, {\n    x: 8,\n    y: 2\n  }, {\n    x: 9,\n    y: 5\n  }];\n\n  const handleMinDate = date => {\n    const timeDif = dates.maxDate - date;\n\n    if (timeDif > 0) {\n      setDates({ ...dates,\n        minDate: date\n      });\n      getData(date, dates.maxDate);\n    }\n  };\n\n  const handleMaxDate = date => {\n    const timeDif = date - dates.minDate;\n\n    if (timeDif > 0) {\n      setDates({ ...dates,\n        maxDate: date\n      });\n      getData(dates.minDate, date);\n    }\n  };\n\n  const getData = (minDate, maxDate) => {\n    // Puxar dados do DB\n    const newEvents = [{\n      eventType: \"entry\",\n      createdAt: new Date(2020, 6, 2)\n    }, {\n      eventType: \"exit\",\n      createdAt: new Date(2020, 6, 2)\n    }, {\n      eventType: \"exit\",\n      createdAt: new Date(2020, 5, 30)\n    }, {\n      eventType: \"exit\",\n      createdAt: new Date(2020, 4, 30)\n    }, {\n      eventType: \"entry\",\n      createdAt: new Date(2020, 4, 30)\n    }, {\n      eventType: \"exit\",\n      createdAt: new Date(2020, 4, 15)\n    }, {\n      eventType: \"exit\",\n      createdAt: new Date(2020, 4, 7)\n    }];\n    setEvents(newEvents);\n    const timeDif = maxDate - minDate;\n    if (timeDif <= 7200000) filterMinutesData(minDate, maxDate);else if (timeDif <= 172800000) filterHoursData(minDate, maxDate);else if (timeDif <= 5259600000) filterDaysData(minDate, maxDate);else filterMonthsData(minDate, maxDate);\n  };\n\n  const filterMinutesData = (minDate, maxDate) => {\n    const initialData = new Date(minDate.getFullYear(), minDate.getMonth(), minDate.getDate(), minDate.getHours(), minDate.getMinutes(), 0, 0);\n    const finalData = new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate(), maxDate.getHours(), maxDate.getMinutes(), 0, 0);\n    const periods = Math.ceil((finalData - initialData) / 600000);\n    console.log(periods);\n  };\n\n  const filterHoursData = (minDate, maxDate) => {\n    const initialData = new Date(minDate.getFullYear(), minDate.getMonth(), minDate.getDate(), minDate.getHours(), 0, 0, 0);\n    const finalData = new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate(), maxDate.getHours(), 1, 0, 0);\n    const periods = Math.ceil((finalData - initialData) / 3600000);\n    console.log(periods);\n  };\n\n  const filterDaysData = (minDate, maxDate) => {\n    const initialData = new Date(minDate.getFullYear(), minDate.getMonth(), minDate.getDate(), 0, 0, 0, 0);\n    const finalData = new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate(), 1, 0, 0, 0);\n    const periods = Math.ceil((finalData - initialData) / 86400000);\n    console.log(periods);\n  };\n\n  const filterMonthsData = (minDate, maxDate) => {\n    const periods = (maxDate.getFullYear() - minDate.getFullYear()) * 12 + (maxDate.getMonth() - minDate.getMonth()) + 1;\n    console.log(periods);\n    console.log(state);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, \"Selecionar per\\xEDodo de visualiza\\xE7\\xE3o:\")), /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(KeyboardDateTimePicker, {\n    variant: \"inline\",\n    ampm: false,\n    label: \"Limite inferior\",\n    value: state.minDate,\n    format: \"dd/MM/yyyy HH:mm\",\n    onChange: handleMinDate,\n    disableFuture: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(KeyboardDateTimePicker, {\n    variant: \"inline\",\n    ampm: false,\n    label: \"Limite superior\",\n    value: state.maxDate,\n    format: \"dd/MM/yyyy HH:mm\",\n    onChange: handleMaxDate,\n    disableFuture: true,\n    minDate: state.minDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, \"Gr\\xE1ficos\")), /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, \"Tabelas\")), /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, \"Indicadores\")), /*#__PURE__*/React.createElement(XYPlot, {\n    width: 300,\n    height: 300,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LineSeries, {\n    data: data2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(VerticalGridLines, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(HorizontalGridLines, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(XAxis, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  })), console.log(state));\n}\n\nexport default Statistics;","map":{"version":3,"sources":["/home/italorennan/csc03FrontEnd/src/sections/Local/Statistics.js"],"names":["React","useState","Text","XYPlot","LineSeries","VerticalGridLines","HorizontalGridLines","XAxis","YAxis","DateFnsUtils","MuiPickersUtilsProvider","KeyboardDateTimePicker","Statistics","dates","setDates","minDate","Date","now","getFullYear","getMonth","getDate","maxDate","events","setEvents","data","setData","data2","x","y","handleMinDate","date","timeDif","getData","handleMaxDate","newEvents","eventType","createdAt","filterMinutesData","filterHoursData","filterDaysData","filterMonthsData","initialData","getHours","getMinutes","finalData","periods","Math","ceil","console","log","state"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Text } from '../../pages/Local/styles';\nimport { XYPlot, LineSeries, VerticalGridLines, HorizontalGridLines, XAxis, YAxis } from 'react-vis';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, KeyboardDateTimePicker } from '@material-ui/pickers';\n\nfunction Statistics() {\n    const [dates, setDates] = useState({minDate: new Date((new Date(Date.now())).getFullYear(), (new Date(Date.now())).getMonth(), (new Date(Date.now())).getDate(), 0, 0, 0, 0),\n                                        maxDate: new Date((new Date(Date.now())).getFullYear(), (new Date(Date.now())).getMonth(), (new Date(Date.now())).getDate(), 23, 59, 59, 999)});\n    const [events, setEvents] = useState([]);\n    const [data, setData] = useState([]);\n\n    const data2 = [\n        {x: 0, y: 8},\n        {x: 1, y: 5},\n        {x: 2, y: 4},\n        {x: 3, y: 9},\n        {x: 4, y: 1},\n        {x: 5, y: 7},\n        {x: 6, y: 6},\n        {x: 7, y: 3},\n        {x: 8, y: 2},\n        {x: 9, y: 5}\n    ];\n\n    const handleMinDate = (date: Date | null) => {\n        const timeDif = dates.maxDate - date;\n        if (timeDif > 0) {\n            setDates({...dates, minDate: date});\n            getData(date, dates.maxDate);\n        }\n    }\n\n    const handleMaxDate = (date: Date | null) => {\n        const timeDif = date - dates.minDate;\n        if (timeDif > 0) {\n            setDates({...dates, maxDate: date});\n            getData(dates.minDate, date);\n        }\n    }\n\n    const getData = (minDate, maxDate) => {\n        // Puxar dados do DB\n        const newEvents = [\n            {eventType: \"entry\",\n             createdAt: new Date(2020, 6, 2)},\n            {eventType: \"exit\",\n             createdAt: new Date(2020, 6, 2)},\n            {eventType: \"exit\",\n             createdAt: new Date(2020, 5, 30)},\n            {eventType: \"exit\",\n             createdAt: new Date(2020, 4, 30)},\n            {eventType: \"entry\",\n             createdAt: new Date(2020, 4, 30)},\n            {eventType: \"exit\",\n             createdAt: new Date(2020, 4, 15)},\n            {eventType: \"exit\",\n             createdAt: new Date(2020, 4, 7)}\n        ];\n        setEvents(newEvents);\n\n        const timeDif = maxDate - minDate;\n        if (timeDif <= 7200000) filterMinutesData(minDate, maxDate);\n        else if (timeDif <= 172800000) filterHoursData(minDate, maxDate);\n        else if (timeDif <= 5259600000) filterDaysData(minDate, maxDate);\n        else filterMonthsData(minDate, maxDate);\n    }\n\n    const filterMinutesData = (minDate, maxDate) => {\n        const initialData = new Date(minDate.getFullYear(), minDate.getMonth(), minDate.getDate(), minDate.getHours(), minDate.getMinutes(), 0, 0);\n        const finalData = new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate(), maxDate.getHours(), maxDate.getMinutes(), 0, 0);\n\n        const periods = Math.ceil((finalData - initialData) / 600000);\n\n        console.log(periods);\n    }\n\n    const filterHoursData = (minDate, maxDate) => {\n        const initialData = new Date(minDate.getFullYear(), minDate.getMonth(), minDate.getDate(), minDate.getHours(), 0, 0, 0);\n        const finalData = new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate(), maxDate.getHours(), 1, 0, 0);\n\n        const periods = Math.ceil((finalData - initialData) / 3600000);\n\n        console.log(periods);\n    }\n\n    const filterDaysData = (minDate, maxDate) => {\n        const initialData = new Date(minDate.getFullYear(), minDate.getMonth(), minDate.getDate(), 0, 0, 0, 0);\n        const finalData = new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate(), 1, 0, 0, 0);\n\n        const periods = Math.ceil((finalData - initialData) / 86400000);\n\n        console.log(periods);\n    }\n\n    const filterMonthsData = (minDate, maxDate) => {\n        const periods = (maxDate.getFullYear() - minDate.getFullYear()) * 12 + (maxDate.getMonth() - minDate.getMonth()) + 1;\n\n        console.log(periods);\n        console.log(state);\n    }\n\n    return (\n        <>\n        <Text><span>Selecionar período de visualização:</span></Text>\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n            <KeyboardDateTimePicker \n                variant=\"inline\" ampm={false}\n                label=\"Limite inferior\"\n                value={state.minDate} format=\"dd/MM/yyyy HH:mm\"\n                onChange={handleMinDate} disableFuture\n            />\n            <KeyboardDateTimePicker \n                variant=\"inline\" ampm={false}\n                label=\"Limite superior\"\n                value={state.maxDate} format=\"dd/MM/yyyy HH:mm\"\n                onChange={handleMaxDate} disableFuture minDate={state.minDate}\n            />\n        </MuiPickersUtilsProvider>\n\n        <Text><span>Gráficos</span></Text>\n\n\n        <Text><span>Tabelas</span></Text>\n\n\n        <Text><span>Indicadores</span></Text>\n\n        <XYPlot width={300} height={300}>\n            <LineSeries data={data2} />\n            <VerticalGridLines />\n            <HorizontalGridLines />\n            <XAxis />\n            <YAxis />\n        </XYPlot>\n        {console.log(state)}\n        </>\n    );\n}\n\nexport default Statistics;"]},"metadata":{},"sourceType":"module"}